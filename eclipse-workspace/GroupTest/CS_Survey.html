//Charishma Setty
//G01478203
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS Department Survey</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: "Poppins", sans-serif;
            background-color: #dedada;
        }

        .text-gradient {
            color: #004d26;
            font-weight: bold;
        }

        .text-gradient:hover {
            color: #ffcc33;
        }

        .nav-link {
            font-weight: bold;
            color: #004d26;
            margin: 0 10px;
            transition: color 0.3s ease-in-out, transform 0.2s ease-in-out;
        }

        .nav-link i {
            margin-right: 5px;
        }

        .nav-link:hover {
            color: #ffcc33;
            transform: translateY(-2px);
        }

        .navbar-toggler-icon {
            background-image: linear-gradient(135deg,#ffcc33, #006633);
        }

        .header-box {
            border: 5px solid #006633;
            padding: 20px;
            text-align: center;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, #006633, #ffcc33);
            margin-bottom: 30px;
            border-radius: 10px;
            color: white;
        }
        .header-box h1 {
            font-size: 2.5rem;
            font-weight: bold;
        }
        .header-box p {
            font-size: 1.2rem;
        }

        .form-section {
            padding: 20px;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .form-section h2 {
            color: #006633;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .btn-custom {
            background-color: #006633;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: bold;
            transition: 0.3s;
        }
        .btn-custom:hover {
            background-color: #004d26;
            color: #ffcc33;
        }
        /* Form Fields */
        .form-label span {
            color: #ff0000;
            font-weight: bold;
        }
        .form-control, .form-select {
            border-radius: 8px;
            border: 2px solid #006633;
            transition: 0.3s;
        }
        .form-control:focus, .form-select:focus {
            border-color: #ffcc33;
            box-shadow: 0 0 8px rgba(255, 204, 51, 0.7);
        }
        /* Checkboxes and Radio Buttons */
        .form-check-input:checked {
            background-color: #006633;
            border-color: #006633;
        }
        .form-check-label {
            font-size: 1rem;
        }
        /* Additional Styles */
        .row-divider {
            height: 1px;
            background-color: #006633;
            margin: 20px 0;
        }

        .is-invalid {
            border: 2px solid red !important;
            background-color: #ffe6e6 !important;
        }


        #greeting {
            font-size: 1rem;  /* Smaller font size */
            font-weight: bold;
        }
    </style>
</head>
<body>


<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-gradient">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold text-gradient " href="index.html">
            <i class="fa fa-user-circle"></i> Charishma Setty
        </a>
        <span class="non-clickable-text">
            (<--Takes you to the homepage)
        </span>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="CS_Depart.html">
                        <i class="fa fa-list-alt"></i> CS Department
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>


<div class="container mt-5">
    <!-- Header Section -->
    <div class="header-box">
        <h1>CS Department Survey</h1>
        <p>Your feedback helps us improve and create better experiences for our students!</p>
        <h2 id="greeting"></h2>
    </div>
    <!-- Survey Form -->
    <section class="form-section">
        <form id="surveyForm" autocomplete="on" action="javascript:void(0);">
        <!-- Personal Information -->
        <h2>Personal Information</h2>
            <div class="row">
                <div class="mb-3">
                    <label for="name" class="form-label">Name<span>*</span></label>
                    <input type="text" id="name" class="form-control" placeholder="Jane Doe"required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email<span>*</span></label>
                    <input type="email" id="email" class="form-control" placeholder="example@gmail.com" required>
                    <span id="email-error" class="text-danger"></span>
                </div>
            </div>

            <div class="mb-3">
                <label for="phone" class="form-label">Phone</label>
                <input type="tel" class="form-control" id="phone" placeholder="123-456-7890" autocomplete="phone">
            </div>

            <div class="mb-3">
                <label for="url" class="form-label">Website URL:</label>
                <input type="url" id="url" name="url" class="form-control" placeholder="https://www.example.com" autocomplete="url">
            </div>

            <div class="mb-3">
                <label for="address" class="form-label">Street Address<span>*</span></label>
                <input type="text" class="form-control" id="address" placeholder="123 Main St" required>
            </div>

            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="zipcode" class="form-label">Zip Code <span>*</span></label>
                    <input type="text" class="form-control" id="zipcode" placeholder="Enter ZIP code" onblur="fetchCityState()" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="city" class="form-label">City <span>*</span></label>
                    <input type="text" id="city" class="form-control" readonly placeholder="City" />
                </div>
                <div class="col-md-4 mb-3">
                    <label for="state" class="form-label">State <span>*</span></label>
                    <input type="text" id="state" class="form-control" readonly placeholder="State" />
                </div>
            </div>
            

            <div class="mb-3">
                <label for="survey-date" class="form-label">Date of Survey <span>*</span></label>
                <input type="date" class="form-control" id="survey-date" required>
            </div>


            <!-- Check-boxes Section -->
            <h2>What did you like most about the campus?</h2>
            <div class="mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="students">
                    <label class="form-check-label" for="students">Students</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="location">
                    <label class="form-check-label" for="location">Location</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="campus">
                    <label class="form-check-label" for="campus">Campus</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="atmosphere">
                    <label class="form-check-label" for="atmosphere">Atmosphere</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="dorms">
                    <label class="form-check-label" for="dorms">Dorm Rooms</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="sports">
                    <label class="form-check-label" for="sports">Sports</label>
                </div>
            </div>


            <!-- Radio Buttons -->
            <h2>How Did You Hear About the University?</h2>
            <div class="mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="interest" id="friends" value="Friends">
                    <label class="form-check-label" for="friends">Friends</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="interest" id="television" value="Television">
                    <label class="form-check-label" for="television">Television</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="interest" id="internet" value="Internet">
                    <label class="form-check-label" for="internet">Internet</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="interest" id="other" value="Other">
                    <label class="form-check-label" for="other">Other</label>
                </div>
            </div>

            <!-- Graduation Section -->
            <h2>Graduation Details</h2>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="graduation-month" class="form-label">High School Graduation Month</label>
                    <input list="months" class="form-control" id="graduation-month">
                    <datalist id="months">
                        <option value="January">
                        <option value="February">
                        <option value="March">
                        <option value="April">
                        <option value="May">
                        <option value="June">
                        <option value="July">
                        <option value="August">
                        <option value="September">
                        <option value="October">
                        <option value="November">
                        <option value="December">
                    </datalist>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="graduation-year" class="form-label">Graduation Year</label>
                    <input type="text" class="form-control" id="graduation-year" placeholder="Enter year (e.g., 2025)">
                </div>
            </div>

            <!-- Feedback Section -->
            <h2>Feedback</h2>
            
            <!-- Dropdown -->
            <div class="mb-3">
                <label for="recommendation" class="form-label">How Likely Are You to Recommend This School? <span>*</span></label>
                <select class="form-select" id="recommendation" required>
                    <option value="">-- Select an option --</option>
                    <option value="Very Likely">Very Likely</option>
                    <option value="Likely">Likely</option>
                    <option value="Unlikely">Unlikely</option>
                </select>
            </div>

            <!-- Additional Comments -->
            <div class="mb-3">
                <label for="comments" class="form-label">Additional Comments</label>
                <textarea class="form-control" id="comments" rows="4" placeholder="Write your comments here..."></textarea>
            </div>

            <!-- New Implementations -->
            <div class="mb-3">
                <label for="dataInput" class="form-label">Enter 10 numbers (1-100): <span>*</span></label>
                <input type="text" id="dataInput" class="form-control" onblur="calculateAverageMax()" required>
                <small class="error" id="dataError"></small>
            </div>
            <div class="mb-3">
                <label>Average:</label>
                <input type="text" id="average" class="form-control" readonly>
                <label>Maximum:</label>
                <input type="text" id="maximum" class="form-control" readonly>
            </div>

             <!-- Submit and Reset Buttons -->
            <button type="submit" class="btn btn-custom">Submit</button>
            <button type="reset" class="btn btn-secondary btn-custom" id="resetButton">Reset</button>
        </form>
    </section>
</div>

<script>
    // Set a cookie with an expiration time (in days)
    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000); // Convert days to milliseconds
        document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/`;
    }

    // Get the value of a cookie by its name
    function getCookie(name) {
        const cookieArr = document.cookie.split("; ");
        for (let cookie of cookieArr) {
            const [key, value] = cookie.split("=");
            if (key === name) {
                return value;
            }
        }
        return null;
    }

    // Function to prompt for user name and set the cookie
    function promptForUserName() {
        if (!sessionStorage.getItem("userName")) { // Check if already stored for this session
            let user = prompt('Enter your name:');
            if (user) {
                setCookie('username', user, 1); // Set cookie for 1 day
                sessionStorage.setItem("userName", user); // Store in session storage
                greetUser(); // Call the function again to update greeting
            }
        }
    }

    // Function to greet the user based on time and cookies
    function greetUser() {
        let user = getCookie('username');

        if (!user) {
            // If cookie doesn't exist, prompt for name (only once per session)
            promptForUserName();
        } else {
            const hours = new Date().getHours();
            let greeting = 'Good Evening';
            if (hours < 12) greeting = 'Good Morning';
            else if (hours < 18) greeting = 'Good Afternoon';

            // Display greeting and a link to change the name
            document.getElementById('greeting').innerHTML = `${greeting} ${user}, welcome to SWE642 Survey!
                <a href="#" id="changeNameLink" style="color: #007bff; text-decoration: underline;">(Not ${user}? Click here to update)</a>`;

            // Add event listener for updating name
            document.getElementById('changeNameLink').addEventListener('click', function (e) {
                e.preventDefault();
                sessionStorage.removeItem("userName"); // Clear session storage
                promptForUserName();
                location.reload();
            });
        }
    }

    // Call this function when the page loads
    window.onload = greetUser;


    //Function to calculate average and maximum
    function calculateAverageMax() {
        const input = document.getElementById('dataInput').value;
        const numbers = input.split(',').map(Number);
        const errorElement = document.getElementById('dataError');
        if (numbers.length !== 10 || numbers.some(n => n < 1 || n > 100 || isNaN(n))) {
            errorElement.textContent = 'Please enter 10 valid numbers between 1 and 100.';
            return;
        }
        errorElement.textContent = '';
        const sum = numbers.reduce((acc, val) => acc + val, 0);
        document.getElementById('average').value = (sum / numbers.length).toFixed(2);
        document.getElementById('maximum').value = Math.max(...numbers);
    }

    // Function to fetch city and state from JSON file
    function fetchCityState() {
        const zip = document.getElementById('zipcode').value.trim();
        
        fetch('zip.json') // Ensure this file is accessible
            .then(response => response.json())
            .then(data => {
                const match = data.zipcodes.find(entry => entry.zip === zip);
                if (match) {
                    document.getElementById('city').value = match.city;
                    document.getElementById('state').value = match.state;
                } else {
                    document.getElementById('city').value = "";
                    document.getElementById('state').value = "";
                    alert('Invalid Zip Code. Please enter a valid ZIP.');
                }
            })
            .catch(error => console.error('Error loading ZIP codes:', error));
    }

    document.getElementById('resetButton').addEventListener('click', function () {
        setTimeout(() => {
            document.getElementById('name').focus(); // Focus on the Name input after resetting
        }, 100); // Small delay to allow form reset
    });



    document.getElementById('surveyForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent form submission

        let errors = [];

        // Reset previous error styles
        resetFieldStyles();

        // 1. Name Validation (Only alphabets)
        const nameField = document.getElementById('name');
        const name = nameField.value.trim();
        if (!/^[A-Za-z\s]+$/.test(name)) {
            errors.push('❌ Name should contain only alphabets.');
            nameField.classList.add('is-invalid');
        }

        // 2. Email Validation (Valid email format)
        const emailField = document.getElementById('email');
        const email = emailField.value.trim();
        if (!/^\S+@\S+\.\S+$/.test(email)) {
            errors.push('❌ Invalid email format.');
            emailField.classList.add('is-invalid');
        }

        // 3. Address Validation (Alphanumeric characters)
        const addressField = document.getElementById('address');
        const address = addressField.value.trim();
        if (!/^[a-zA-Z0-9\s,.-]+$/.test(address)) {
            errors.push('❌ Address should contain only alphanumeric characters.');
            addressField.classList.add('is-invalid');
        }

        // 4. At least two checkboxes checked
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]:checked');
        if (checkboxes.length < 2) {
            errors.push('❌ Please select at least two options about what you liked most.');
        }

        // 5. A radio button option is selected
        const radioSelected = document.querySelector('input[name="interest"]:checked');
        if (!radioSelected) {
            errors.push('❌ Please select how you heard about the university.');
        }

        // Display errors
        if (errors.length > 0) {
            alert(errors.join('\n')); // Display all errors in an alert box
            clearErrorFields(); // Clear only the fields with errors
        } else {
            alert('✅ Form submitted successfully!');
            document.getElementById('surveyForm').reset(); // Reset form on successful submission
            document.getElementById('name').focus(); // Focus on the Name field
        }
    });

    function clearErrorFields() {
        // Clear the invalid fields
        const invalidFields = document.querySelectorAll('.is-invalid');
        invalidFields.forEach(field => {
            field.value = '';  // Clear the field value
        });
    }


    // Reset field styles
    function resetFieldStyles() {
        const fields = document.querySelectorAll('.form-control');
        fields.forEach(field => {
            field.classList.remove('is-invalid');
        });
    }

    document.getElementById('resetButton').addEventListener('click', function () {
        // Clear all errors and reset the form
        resetFieldStyles();
        document.getElementById('surveyForm').reset(); // Reset form values
    });
    </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
